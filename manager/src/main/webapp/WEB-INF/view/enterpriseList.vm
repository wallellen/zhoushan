<head>
    <link href="$!request.getContextPath()/public/data-tables/DT_bootstrap.css" rel="stylesheet" />
</head>
<body>
	<div class="portlet box green">
		
		<div class="portlet-title">
			<h4><i class="icon-reorder"></i>工具栏</h4>
			<div class="tools">
				<a href="javascript:;" class="collapse"></a>
			</div>
		</div>
		
		<div class="portlet-body">
        	<div class="row-fluid">
            	<div  class="span3">
        		<h4 > 库存用量 </h4>
            	<a href="#" class="icon-btn span6" style="width:40%">
                	<i class="icon-map-marker"></i>
                	<div>已用完</div>
            	</a>
            	
            	<a href="#" class="icon-btn span6 location-active" style="width:40%" >
                	<i class="icon-home"></i>
                	<div>未用完</div>
            	</a>
            	</div> <!--span3 over-->
        		
        		<div class="span3">
            		<h4  >分类</h4>
            		<div class="row-fluid" style="margin-top:20px;">
            			<div class="btn-group span6">
            				<a class="btn green" href="#" data-toggle="dropdown">
            				<i class="icon-question-sign"></i> 仓储配置
            				<i class="icon-angle-down"></i>
            				</a>
            				<ul class="dropdown-menu">
            					<li><a href="#"><i class="icon-pencil"></i> 级别1 </a></li>
            					<li><a href="#"><i class="icon-trash"></i> 级别2 </a></li>
            					<li><a href="#"><i class="icon-ban-circle"></i> 级别3 </a></li>
            					<li class="divider"></li>
            					<li><a href="#"><i class="i"></i> Make admin</a></li>
            				</ul>
            			</div>
            			
            			<div class="btn-group span6">
            				<a class="btn green" href="#" data-toggle="dropdown">
            				<i class="icon-key"></i>温控配置
            				<i class="icon-angle-down"></i>
            				</a>
            				<ul class="dropdown-menu">
            					<li><a href="#"><i class="icon-pencil"></i> Edit</a></li>
            					<li><a href="#"><i class="icon-trash"></i> Delete</a></li>
            					<li><a href="#"><i class="icon-ban-circle"></i> Ban</a></li>
            					<li class="divider"></li>
            					<li><a href="#"><i class="i"></i> Make admin</a></li>
            				</ul>
            			</div>
            		</div>
        			<div class="row-fluid" style="margin-top:10px;">
            			<div class="btn-group span6">
            				<a class="btn green" href="#" data-toggle="dropdown">
            				<i class=" icon-plane"></i> 溯源配置
            				<i class="icon-angle-down"></i>
            				</a>
            				<ul class="dropdown-menu">
            					<li><a href="#"><i class="icon-pencil"></i> Edit</a></li>
            					<li><a href="#"><i class="icon-trash"></i> Delete</a></li>
            					<li><a href="#"><i class="icon-ban-circle"></i> Ban</a></li>
            					<li class="divider"></li>
            					<li><a href="#"><i class="i"></i> Make admin</a></li>
            				</ul>
            			</div>
            			
            		</div>
            	</div>
        		
        		<div class="span3" >
        		<h4  >排序</h4>

        			<div class="btn-group row-fluid" style="margin-top:10px !important;">
        				<a href="javascript:;" class="btn span6 blue sort_desc" style="background-color:#0E192A !important;">注册时间</a>
        				<a href="javascript:;" class="btn red twinkle span6">欠费时间</a>
        			</div>
                    <div style="width:10px"></div>
                    <div class="btn-group row-fluid" style="margin-top:10px !important;">
                        <a href="javascript:;" class="btn red span6" style="background-color:#0E192A !important;">升序</a>
                        <a href="javascript:;" class="btn red span6 sort_asc">降序</a>
                    </div>
        		</div>
        		
        		<div class="span3" >
        		<h4  >检索</h4>	
        			<div class="row-fluid" style="margin-top:38px;">
            		<div class="input-cont span7">   
            			<input type="text" placeholder="Search..." class="m-wrap">
            		</div>
            		<button type="button" class="btn green span5">搜索<i class="m-icon-swapright m-icon-white"></i></button>			
        			</div>
        		</div>		
        	</div> <!--the tools bar's Row fluid end -->
		</div> <!--portlet-body end -->
	</div> <!--Portlet end -->
	<!--data table start-->
<div class="portlet box green tabbable">
		<div class="portlet-title">
			<h4><i class="icon-globe"></i>企业数据</h4>
		</div>
		<div class="portlet-body">
			<div class="tabbable portlet-tabs">
				<ul class="nav nav-tabs">
					<li class="active"><a href="#portlet_tab1" data-toggle="tab">列表</a></li>
				</ul>
				<div class="tab-content">
					<div class="tab-pane active" id="portlet_tab1">
        				<div id="sample_1_wrapper" class="dataTables_wrapper form-inline" role="grid"><div class="row-fluid"><div class="span6"><div id="sample_1_length" class="dataTables_length"><label><select size="1" name="sample_1_length" id="enterprise_records_pers_page" aria-controls="sample_1" class="m-wrap xsmall"><option value="5">5</option><option value="10">10</option><option value="20">20</option><option value="-1">All</option></select> 每页记录数</label></div></div><div class="span6"><div class="dataTables_filter" id="sample_1_filter"><label>Search: <input type="text" aria-controls="sample_1" class="m-wrap medium"></label></div></div></div>
						<table class="table table-striped table-bordered table-hover dataTable" id="sample_1" aria-describedby="sample_1_info">
        				<thead>
        					<tr role="row">
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 5%;" aria-sort="descending" >企业ID号</th>
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 10%;" aria-sort="descending" >企业名称</th>
                                <th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 5%;" aria-sort="descending" >企业状态</th>
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 10%;" aria-sort="descending" >企业邮箱</th>
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 8%;" aria-sort="descending" >联系电话</th>
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 10%;" aria-sort="descending" >注册日期</th>
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 10%;" aria-sort="descending" >注销日期</th>
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 17%;" aria-sort="descending" >服务配置</th>		
        						<th class="sorting_disabled" role="columnheader" tabindex="0" aria-controls="sample_1" rowspan="1" colspan="1" style="width: 15%;" aria-sort="descending" >操作</th>
        					</tr>
        				</thead>
        				
        				<tbody role="alert" aria-live="polite" aria-relevant="all">		
        				</tbody>
        				</table>
        				<div class="row-fluid" id="enterprise_table_id">
							<!--<div class="span6"><div class="dataTables_info" id="table_page_info">Showing 1 to 5 of 25 entries</div></div>
							<div class="span6">
								<div class="dataTables_paginate paging_bootstrap pagination">
									<ul><li class="prev disabled"><a href="#">← Prev</a></li><li class="active"><a href="#">1</a></li><li><a href="#">2</a></li><li><a href="#">3</a></li><li><a href="#">4</a></li><li><a href="#">5</a></li><li class="next"><a href="#">Next → </a></li></ul>
								</div>
							</div>-->
						</div> <!--分页div row fluid结束-->
						</div>
					</div> <!--first tab over-->
					
				</div>
			</div>
			
		</div> <!--portlet-body end-->
	</div> <!--portlet end-->
	<!--data table end-->
	<script src="$!request.getContextPath()/public/ConstantJs/page.js"></script>
    <script src="$!request.getContextPath()/public/ConstantJs/submitForm.js"></script>
	
</body>
<script>
var trOdd = "<tr class='gradeX odd'></tr>";
var trEven = "<tr class='gradeX even'></tr>";
var tdContent = "<td class='hidden-480 '>{0}</td>";
var tdOperator = "<td class='hidden-480 '>"
                +"<button type='button' class='btn green editBt' >编辑</button>"
                +"<button type='button' class='btn black withdrawBt' >注销</button>"
                +"<button type='button' class='btn red dueHandleBt' >停用/启用</button>"
                +"</td>";
var tdService =  "<td class='hidden-480 '>"
                + "<button type='button'  class='btn red storageSBt'"
                +">仓储：{0}</button>"
                + "<button type='button'  class='btn blue tempSBt'"
                +">温控：{0}</button>"
                + "<button type='button'  class='btn black SBt'"
                +">溯源：{0}</button>"
                +"</td>";

String.prototype.format = function()
{
    var args = arguments;
    return this.replace(/\{(\d+)\}/g,                
        function(m,i){
            return args[i];
        });
}

function addDefaultDataToTable( data, table){

    var tbody = jQuery('#'+table+' tbody');
    //first clear the table's tbody
    tbody.empty();
    
    for(var i = 0; i < data.length; i++){
        if(i % 2 == 0) {
            tbody.append(trOdd);
        }else{
            tbody.append(trEven);
        }
        var item = data[i];
        var lastTr = jQuery('#'+table+'>tbody>tr:last');

        //because json is disordered  
        var order = new Array("id","name","isValid","email","phone"
                    ,"registerTime","withdrawTime");
        for(var index in order){
            if(order[index] == "isValid"){
                 lastTr.append(tdContent.format(item['isValid'] ? (item['isDue'] ? '已欠费':'正常'):'未激活')); 
            }
            else{
                 lastTr.append(tdContent.format(item[order[index]] ? item[order[index]]: '无')); 
            }
              
        }
        //add services setting
        lastTr.append(tdService.format(item.storageService,item.tempService,item.traceService))
        //add operation
        lastTr.append(tdOperator.format(item.id,item.name));
        //add click listener to select button
    } // for is over
}//function addDefaultDataToTable is over

jQuery(function(jQuery) {

    var pageInfo = eval($!{pageInfo});
    var enterpriseList = pageInfo.dataList;

    //sample_1 是原料表的id
    addDefaultDataToTable(enterpriseList,"sample_1");
    createPageInfo("enterprise_table_id",pageInfo,"enterprise_records_pers_page","$!request.getContextPath()/enterpriseManager/enterpriseList");

});
</script>